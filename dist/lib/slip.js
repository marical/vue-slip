"use strict";function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _slicedToArray=function(){function t(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{!o&&a.return&&a.return()}finally{if(r)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):e()}(0,function(){function t(t){if(null==t.clientX){var e=t.targetTouches&&t.targetTouches[0]?t.targetTouches:t.changedTouches;if(e&&e[0])return t.clientX=e[0].clientX,t.clientY=e[0].clientY,[e[0].clientX,e[0].clientY]}return[t.clientX,t.clientY]}function e(t,e,n,o){t.addEventListener(p[e],n,!!o)}function n(t,e,n,o){t.removeEventListener(p[e],n,!!o)}function o(t,e){return 0==t?0:t<0?e<t?t:e>0?0:e:e>t?t:e<0?0:e}function r(n){if(!m){m=this,e(h,"move",s,!0),e(h,"up",a,!0);var o=t(n),r=_slicedToArray(o,2),i=r[0],u=r[1];this.bx=this.ax-i,this.by=this.ay-u,this.emit("start",n)}}function i(e){var n=t(e),r=_slicedToArray(n,2),i=r[0],s=r[1];return[o(m.mx,i+m.bx),o(m.my,s+m.by)]}function s(t){if(m){var e;window.getSelection?window.getSelection().removeAllRanges():h.selection.empty(),(e=m).emit.apply(e,["move"].concat(_toConsumableArray(i(t)),[t]))}}function a(t){if(m){n(h,"up",a,!0),n(h,"move",s,!0);var e=i(t),o=_slicedToArray(e,2),r=o[0],u=o[1];this.ax=r,this.ay=u,m.emit("end",r,u,t),m=null}}function u(t,e){var n=e>0?"transform "+e+"ms ease-out":"none";b.forEach(function(e){t.style[e]=n})}function c(t,e,n,o){v.forEach(function(o){t.style[o]="translate3d("+e+"px, "+n+"px, 0)"}),o&&u(t,o)}function f(t){function n(){r&&(r.setTranslate(),r=null)}var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"slip",r=void 0;e(h.documentElement,"down",n),t.directive(o,{bind:function(t,e,o){var i=e.value||{},s=i.mx||-60,a=i.my||0,f=!1===i.auto?0:i.auto||100,l=0,h=0;new d(t,s,a).on("start",function(t){f&&u(this.dom,0),l=t.clientY,h=0,r&&r!=this&&n(),t.stopPropagation(),i.start&&i.start(this,t)}).on("end",function(t,e,n){if(!(h>0)){if(f){var o=Math.abs(t-this.tx)/Math.abs(s)>.1?s:0;this.tx&&(o=0==o?s:0),this.tx=o;var u=Math.abs(e-this.ty)/Math.abs(a)>.1?a:0;0!=this.ty&&(u=0==u?a:0),this.ty=u,c(this.dom,o,u,f),this.setSkewing(o,u)}r=this,i.end&&i.end(this,tx,ty,n)}}).on("move",function(t,e,n){0==h&&(h=Math.abs(n.clientY-l)>5?1:-1),h>0||(n.preventDefault(),c(this.dom,t,e),i.move&&i.move(this,t,e,evnet))}).assign({tx:0,ty:0,setTranslate:function(t,e){var n=this.setSkewing(t||0,e||0),o=_slicedToArray(n,2),r=o[0],i=o[1];c(this.dom,r,i,f),this.tx=r,this.ty=i}})}})}var l=(Array.prototype.slice,function(){function t(){_classCallCheck(this,t),this._monitor_=Object.assign({},this._monitor_||{})}return _createClass(t,[{key:"on",value:function(t,e){var n=this._monitor_||(this._monitor_={});return n[t]||(n[t]=[]),n[t].push(e),this}},{key:"hasEvent",value:function(t){return(this._monitor_&&this._monitor_[t]||[]).length>0||!!this["on"+t]}},{key:"onec",value:function(t,e){function n(){e.apply(this,arguments),this.off(t,n)}return this.on(t,n),this}},{key:"off",value:function(t,e){var n=this._monitor_;if(n)if(e){var o=n[t];if(o){var r=o.indexOf(e);r>-1&&o.splice(r,1)}}else t?delete n[t]:delete this._monitor_;return this}},{key:"emit",value:function(t){for(var e=this._monitor_&&this._monitor_[t]||[],n=arguments.length,o=Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];if(e.length)for(var i=0;i<e.length;i+=1)e[i].apply(this,o);var s=this["on"+t];return s&&s.apply(this,o),this}},{key:"assign",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return"string"==typeof e[0]?this.assign(_defineProperty({},e[0],e[1])):(e.unshift(this),Object.assign.apply(Object,e)),this}}]),t}()),h=window.document,y="ontouchstart"in h,m=void 0,p={move:y?"touchmove":"mousemove",down:y?"touchstart":"mousedown",up:y?"touchend":"mouseup"},d=function(t){function n(t,o,i){_classCallCheck(this,n);var s=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return s.dom="string"==typeof t?h.getElementById(t):t,s.ax=0,s.ay=0,s.mx=o||-60,s.my=i||0,e(s.dom,"down",r.bind(s)),s}return _inherits(n,t),_createClass(n,[{key:"setSkewing",value:function(t,e){return this.ax=o(this.mx,t||0),this.ay=o(this.my,e||0),[this.ax,this.ay]}}]),n}(l),v="WebkitTransform,MozTransform,OTransform,MsTransform,transform".split(","),b="WebkitTransition,MozTransition,OTransition,MsTransform,transition".split(",");return window.Vue&&f(window.Vue),{EventEmitter:l,Slip:d,install:f}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9zbGlwLmpzIl0sIm5hbWVzIjpbImdsb2JhbCIsImZhY3RvcnkiLCJleHBvcnRzIiwiX3R5cGVvZiIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsInVuZGVmaW5lZCIsImlzVG91Y2giLCJldiIsIm1vdmVEYXRhIiwidG91Y2hlcyIsInRhcmdldFRvdWNoZXMiLCJjaGFuZ2VkVG91Y2hlcyIsImNsaWVudFgiLCJjbGllbnRZIiwiZG93biIsInR5cGUiLCJmbiIsImNhcCIsInVwIiwiZXZlbnRzIiwicmVtb3ZlRXZlbnQiLCJhcHBlbmRFdmVudCIsImRvbSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJtIiwiYyIsInNsaXBEb3duIiwidGhpcyIsImRvYyIsInNsaXBNb3ZlIiwic2xpcFVwIiwiX2dldEV2ZW50WFkiLCJfZ2V0RXZlbnRYWTIiLCJfc2xpY2VkVG9BcnJheSIsIngiLCJieSIsImF5IiwieSIsImVtaXQiLCJnZXRTbGlwRGF0YSIsIl9nZXRFdmVudFhZMyIsImdldEV2ZW50WFkiLCJfZ2V0RXZlbnRYWTQiLCJnZXRNYXgiLCJieCIsIm15IiwiZXZ0IiwiX21vdmVEYXRhIiwid2luZG93IiwiZ2V0U2VsZWN0aW9uIiwicmVtb3ZlQWxsUmFuZ2VzIiwic2VsZWN0aW9uIiwiZW1wdHkiLCJhcHBseSIsImNvbmNhdCIsIl90b0NvbnN1bWFibGVBcnJheSIsImF4IiwidCIsInRTdHIiLCJ0cmFuc2l0aW9uS2V5cyIsImZvckVhY2giLCJrZXkiLCJzdHlsZSIsInNldFRyYW5zbGF0ZSIsImFuaW0iLCJ0cmFuc2Zvcm1LZXlzIiwic2V0VHJhbnNpdGlvbiIsImluc3RhbGwiLCJ2dWUiLCJjdXJyU2xpcCIsIm5hbWVkIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiY2xvc2VDdXJyIiwiYmluZCIsImVsIiwiYmluZGluZyIsInZub2RlIiwib3B0IiwidmFsdWUiLCJteCIsImF1dG8iLCJ5U3RhcnQiLCJpc1Njcm9sbCIsIlNsaXAiLCJldmVudCIsInN0b3BQcm9wYWdhdGlvbiIsInN0YXJ0Iiwib24iLCJ0eCIsIk1hdGgiLCJhYnMiLCJ0eSIsImVuZCIsInByZXZlbnREZWZhdWx0IiwibW92ZSIsImV2bmV0IiwiYXNzaWduIiwiX3NldFNrZXdpbmciLCJzZXRTa2V3aW5nIiwiX3NldFNrZXdpbmcyIiwiRXZlbnRFbWl0dGVyIiwiQXJyYXkiLCJwcm90b3R5cGUiLCJzbGljZSIsIl9jbGFzc0NhbGxDaGVjayIsIl9tb25pdG9yXyIsIk9iamVjdCIsIl9jcmVhdGVDbGFzcyIsIm1vbml0b3IiLCJwdXNoIiwiZnVuIiwiZnVueCIsIm9mZiIsImVzIiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwiYWciLCJfbGVuIiwiX2tleSIsImkiLCJvbkZ1biIsIl9sZW4yIiwiYXJncyIsIl9rZXkyIiwidW5zaGlmdCIsImRvY3VtZW50IiwiX0V2ZW50RW1pdHRlciIsImlkIiwiX3RoaXMiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsIl9fcHJvdG9fXyIsImdldFByb3RvdHlwZU9mIiwiY2FsbCIsImdldEVsZW1lbnRCeUlkIiwiX2luaGVyaXRzIiwic3BsaXQiXSwibWFwcGluZ3MiOiJpeERBQUMsU0FBVUEsRUFBUUMsR0FDQyxZQUFuQixtQkFBT0MsU0FBUCxZQUFBQyxRQUFPRCxXQUEwQyxtQkFBWEUsUUFBeUJBLE9BQU9GLFFBQVVELElBQzlELGtCQUFYSSxTQUF5QkEsT0FBT0MsSUFBTUQsT0FBT0osR0FBV0EsS0FGL0RNLEVBR1EsV0E4R1QsUUFBSUMsR0FBVUMsR0FFZCxHQUFJQyxNQUFBQSxFQUFBQSxRQUFKLENBS1EsR0FBSUMsR0FBVUYsRUFBR0csZUFBaUJILEVBQUdHLGNBQWMsR0FBS0gsRUFBR0csY0FBZ0JILEVBQUdJLGNBSHRGLElBQUFGLEdBQUFBLEVBQXVCLEdBSWYsTUFGQUYsR0FBR0ssUUFBSEgsRUFBb0IsR0FBQUcsUUFDcEJMLEVBQUFNLFFBQUlKLEVBQWFDLEdBQUFBLFNBQ2JELEVBQVdBLEdBQUFBLFFBQVlBLEVBQUEsR0FBQUks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ekYsRUFBQSxZQUFBLFlBSUdRLEtBQU1SLEVBQVMsYUFBYyxZQUZqQ1ksR0FBSUMsRUFBUyxXQUFBLFdBdURMQyxFQXRMYSxTQUFBNEcsR0FvTEwsUUFBQTVDLEdBQUE2QyxFQUFBakQsRUFBQW5DLEdBQUE0RCxnQkFBQTlFLEtBQUF5RCxFQUFBLElBQUE4QyxHQUFBQywyQkFBQXhHLE1BQUF5RCxFQUFBZ0QsV0FBQXpCLE9BQUEwQixlQUFBakQsSUFBQWtELEtBQUEzRyxNQUFBLE9BQUF1RyxHQUFBNUcsSUFBQSxnQkFBQTJHLEdBQUFyRyxFQUFBMkcsZUFBQU4sR0FBQUEsRUFpQlJDLEVBQUsxRSxHQUFLLEVBYlYwRSxFQUFBOUYsR0FBS29CLEVBRUxoRCxFQUFBQSxHQUFBQSxJQUFBLEdBQ0FBLEVBQUFBLEdBQUFBLEdBQVcsRUFFbEJhLEVBQUE2RyxFQUFBNUcsSUFBQSxPQUFBSSxFQUFBZ0QsS0FBQXdELElBVGVBLEVBcExLLE1BQUFNLFdBQUFwRCxFQUFBNEMsR0FBQXBCLGFBQUF4QixJQUFBdkIsSUFBQSxhQUFBa0IsTUFBQSxTQStNTjdDLEVBQUdHLEdBR1YsTUFqQkpWLE1BQUE2QixHQUFBYixFQUFBaEIsS0FBcUJrQixHQUFJWCxHQUFBLEdBQUFQLEtBQUFTLEdBQUFPLEVBQUFoQixLQUFBa0IsR0FBQVIsR0FBQSxJQWlCYlYsS0FBSzZCLEdBQUk3QixLQUFLUyxRQWxOVGdELEdBc0xiaEUsR0FrQ0o2QyxFQUFnQixnRUFBZ0V3RSxNQUFNLEtBaEJsRjlFLEVBQUEsb0VBQUE4RSxNQUFBLElBeUdRN0MsT0FKQTdCLFFBQUFBLEtBQ0FlLEVBQUFBLE9BQUFBLE1BR0FjLGFBQUFBLEVBQUFBLEtBQUFBLEVBRk16QixRQUFBQSIsImZpbGUiOiJsaWIvc2xpcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG5cdHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcblx0dHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDogZmFjdG9yeSgpO1xufSh0aGlzLCAoZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XG5cblxuY29uc3Qgc2xpY2UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2U7XG4vLyDoh6rlrprkuYnkuovku7Yg57G75Ly8IG5vZGVqc+S4reeahCBFdmVudEVtaXR0ZXJcbmNsYXNzIEV2ZW50RW1pdHRlciB7XG4gICAgY29uc3RydWN0b3IoKXtcbiAgICAgICAgLy8g5YWL6ZqG5LiA5Lu9IOS6i+S7tlxuICAgICAgICB0aGlzLl9tb25pdG9yXyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuX21vbml0b3JfIHx8IHt9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICog57uR5a6a5LqL5Lu2XG4gICAgICogQHBhcmFtIHR5cGUg5LqL5Lu25ZCN56ewXG4gICAgICogQHBhcmFtIGZ1biDkuovku7bmlrnms5VcbiAgICAgKiBAcmV0dXJucyB7RXZlbnRFbWl0dGVyfVxuICAgICAqL1xuICAgIG9uKHR5cGUsIGZ1bikge1xuICAgICAgICBsZXQgbW9uaXRvciA9IHRoaXMuX21vbml0b3JfIHx8ICh0aGlzLl9tb25pdG9yXyA9IHt9KTtcbiAgICAgICAgbW9uaXRvclt0eXBlXSB8fCAobW9uaXRvclt0eXBlXSA9IFtdKTtcbiAgICAgICAgbW9uaXRvclt0eXBlXS5wdXNoKGZ1bik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOWIpOaWreaYr+WQpui/mOacieeJueWumuS6i+S7tlxuICAgICAqIEBwYXJhbSB0eXBlXG4gICAgICogQHJldHVybnMgeyp9XG4gICAgICovXG4gICAgaGFzRXZlbnQodHlwZSkge1xuICAgICAgICBsZXQgbW9uaXRvciA9IHRoaXMuX21vbml0b3JfICYmIHRoaXMuX21vbml0b3JfW3R5cGVdIHx8IFtdO1xuICAgICAgICByZXR1cm4gbW9uaXRvci5sZW5ndGggPiAwIHx8ICEhdGhpc1snb24nICsgdHlwZV07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5Y+q5pyJ5omn6KGM5LiA5qyh55qE5LqL5Lu2XG4gICAgICogQHBhcmFtIHR5cGUg5LqL5Lu25ZCN56ewXG4gICAgICogQHBhcmFtIGZ1biDkuovku7bmlrnms5VcbiAgICAgKiBAcmV0dXJucyB7RXZlbnRFbWl0dGVyfVxuICAgICAqL1xuICAgIG9uZWModHlwZSwgZnVuKSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bngoKSB7XG4gICAgICAgICAgICBmdW4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIHRoaXMub2ZmKHR5cGUsIGZ1bngpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub24odHlwZSwgZnVueCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOenu+mZpOS6i+S7tlxuICAgICAqIEBwYXJhbSB0eXBlIOS6i+S7tuWQjeensFxuICAgICAqIEBwYXJhbSBmdW4g5LqL5Lu25pa55rOVXG4gICAgICogQHJldHVybnMge0V2ZW50RW1pdHRlcn1cbiAgICAgKi9cbiAgICBvZmYodHlwZSwgZnVuKSB7XG4gICAgICAgIGxldCBtb25pdG9yID0gdGhpcy5fbW9uaXRvcl87XG4gICAgICAgIGlmIChtb25pdG9yKSB7XG4gICAgICAgICAgICBpZiAoZnVuKSB7XG4gICAgICAgICAgICAgICAgbGV0IGVzID0gbW9uaXRvclt0eXBlXTtcbiAgICAgICAgICAgICAgICBpZiAoZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gZXMuaW5kZXhPZihmdW4pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBtb25pdG9yW3R5cGVdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fbW9uaXRvcl87XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog6Kem5Y+R5LqL5Lu2XG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGUg5LqL5Lu25ZCN56ewXG4gICAgICogQHBhcmFtIHsqfSBhZyDkvKDpgJLnmoTlj4LmlbBcbiAgICAgKi9cbiAgICBlbWl0KHR5cGUsIC4uLmFnKSB7XG4gICAgICAgIGxldCBlcyA9IHRoaXMuX21vbml0b3JfICYmIHRoaXMuX21vbml0b3JfW3R5cGVdIHx8IFtdO1xuICAgICAgICBpZiAoZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgZXNbaV0uYXBwbHkodGhpcywgYWcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBvbkZ1biA9IHRoaXNbJ29uJyArIHR5cGVdO1xuICAgICAgICBvbkZ1biAmJiBvbkZ1bi5hcHBseSh0aGlzLCBhZyk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOaJqeWxleacrOi6q1xuICAgICAqL1xuICAgIGFzc2lnbiguLi5hcmdzKSB7XG4gICAgICAgIGlmKHR5cGVvZiBhcmdzWzBdID09PSAnc3RyaW5nJyl7XG4gICAgICAgICAgICB0aGlzLmFzc2lnbih7W2FyZ3NbMF1dOmFyZ3NbMV19KVxuICAgICAgICB9XG4gICAgICAgIGVsc2V7XG4gICAgICAgICAgICBhcmdzLnVuc2hpZnQodGhpcyk7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduLmFwcGx5KE9iamVjdCwgYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT3ln7rnoYBTbGlw57G7PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmxldCBkb2MgPSB3aW5kb3cuZG9jdW1lbnRcblxubGV0IGlzVG91Y2ggPSAnb250b3VjaHN0YXJ0JyBpbiBkb2NcblxubGV0IG1vdmVEYXRhXG5cbmZ1bmN0aW9uIGdldEV2ZW50WFkoZXYpe1xuICAgIC8v56e75Yqo5piv5aSa54K56Kem5o6n77yM6buY6K6k5L2/55So56ys5LiA5Liq5L2c5Li6Y2xpZW50WOWSjGNsaWVudFlcbiAgICBpZiAoZXYuY2xpZW50WCA9PSBudWxsKSB7XG4gICAgICAgIGxldCB0b3VjaGVzID0gZXYudGFyZ2V0VG91Y2hlcyAmJiBldi50YXJnZXRUb3VjaGVzWzBdID8gZXYudGFyZ2V0VG91Y2hlcyA6IGV2LmNoYW5nZWRUb3VjaGVzXG4gICAgICAgIGlmICh0b3VjaGVzICYmIHRvdWNoZXNbMF0pIHtcbiAgICAgICAgICAgIGV2LmNsaWVudFggPSB0b3VjaGVzWzBdLmNsaWVudFhcbiAgICAgICAgICAgIGV2LmNsaWVudFkgPSB0b3VjaGVzWzBdLmNsaWVudFlcbiAgICAgICAgICAgIHJldHVybiBbdG91Y2hlc1swXS5jbGllbnRYLCB0b3VjaGVzWzBdLmNsaWVudFldXG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFtldi5jbGllbnRYLCBldi5jbGllbnRZXVxufVxuXG5sZXQgZXZlbnRzID0ge1xuICAgIG1vdmU6IGlzVG91Y2g/ICd0b3VjaG1vdmUnOiAnbW91c2Vtb3ZlJyxcbiAgICBkb3duOiBpc1RvdWNoPyAndG91Y2hzdGFydCc6ICdtb3VzZWRvd24nLFxuICAgIHVwOiBpc1RvdWNoPyAndG91Y2hlbmQnOiAnbW91c2V1cCdcbn1cbmZ1bmN0aW9uIGFwcGVuZEV2ZW50KGRvbSwgdHlwZSwgZm4sIGNhcCl7XG4gICAgZG9tLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRzW3R5cGVdLCBmbiwgISFjYXApXG59XG5mdW5jdGlvbiByZW1vdmVFdmVudChkb20sIHR5cGUsIGZuLCBjYXApe1xuICAgIGRvbS5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50c1t0eXBlXSwgZm4sICEhY2FwKVxufVxuXG5mdW5jdGlvbiBnZXRNYXgobSwgYyl7XG4gICAgaWYobSA9PSAwKXtcbiAgICAgICAgcmV0dXJuIDBcbiAgICB9XG4gICAgaWYobSA8IDApe1xuICAgICAgICByZXR1cm4gYyA8IG0gPyBtIDogKGMgPiAwID8gMCA6IGMpXG4gICAgfVxuICAgIHJldHVybiBjID4gbSA/IG0gOiAoYyA8IDAgPyAwIDogYylcbn1cblxuLy/pvKDmoIfnp7vliqjlvIDlp4tcbmZ1bmN0aW9uIHNsaXBEb3duKGV2KXtcbiAgICBpZihtb3ZlRGF0YSl7XG4gICAgICAgIHJldHVyblxuICAgIH1cbiAgICBtb3ZlRGF0YSA9IHRoaXNcbiAgICBhcHBlbmRFdmVudChkb2MsICdtb3ZlJywgc2xpcE1vdmUsIHRydWUpXG4gICAgYXBwZW5kRXZlbnQoZG9jLCAndXAnLCBzbGlwVXAsIHRydWUpXG4gICAgbGV0IFt4LCB5XSA9IGdldEV2ZW50WFkoZXYpXG4gICAgdGhpcy5ieCA9IHRoaXMuYXggLSB4XG4gICAgdGhpcy5ieSA9IHRoaXMuYXkgLSB5XG4gICAgdGhpcy5lbWl0KCdzdGFydCcsIGV2KVxufVxuXG5mdW5jdGlvbiBnZXRTbGlwRGF0YShldil7XG4gICAgbGV0IFt4LCB5XSA9IGdldEV2ZW50WFkoZXYpXG4gICAgcmV0dXJuIFtnZXRNYXgobW92ZURhdGEubXgsIHggKyBtb3ZlRGF0YS5ieCksIGdldE1heChtb3ZlRGF0YS5teSwgeSArIG1vdmVEYXRhLmJ5KV1cbiAgICAvL21vdmVEYXRhLmVtaXQodHlwZSwgbXgsIG15LCBldilcbiAgICAvL3JldHVybiBbbXgsIG15XVxufVxuXG4vL+m8oOagh+enu+WKqOS4rVxuZnVuY3Rpb24gc2xpcE1vdmUoZXZ0KXtcbiAgICBpZihtb3ZlRGF0YSl7XG4gICAgICAgIHdpbmRvdy5nZXRTZWxlY3Rpb24gPyB3aW5kb3cuZ2V0U2VsZWN0aW9uKCkucmVtb3ZlQWxsUmFuZ2VzKCkgOiBkb2Muc2VsZWN0aW9uLmVtcHR5KClcbiAgICAgICAgbW92ZURhdGEuZW1pdCgnbW92ZScsIC4uLmdldFNsaXBEYXRhKGV2dCksIGV2dClcbiAgICB9XG59XG5cbi8v6byg5qCH5oqs6LW3XG5mdW5jdGlvbiBzbGlwVXAoZXZ0KXtcbiAgICBpZihtb3ZlRGF0YSl7XG4gICAgICAgIHJlbW92ZUV2ZW50KGRvYywgJ3VwJywgc2xpcFVwLCB0cnVlKVxuICAgICAgICByZW1vdmVFdmVudChkb2MsICdtb3ZlJywgc2xpcE1vdmUsIHRydWUpXG4gICAgICAgIGxldCBbeCwgeV0gPSBnZXRTbGlwRGF0YShldnQpXG4gICAgICAgIHRoaXMuYXggPSB4XG4gICAgICAgIHRoaXMuYXkgPSB5XG4gICAgICAgIG1vdmVEYXRhLmVtaXQoJ2VuZCcsIHgsIHksIGV2dClcbiAgICAgICAgbW92ZURhdGEgPSBudWxsXG4gICAgfVxufVxuXG5jbGFzcyBTbGlwIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgICAvLyDliJ3lp4vljJZcbiAgICBjb25zdHJ1Y3RvciAoaWQsIG14LCBteSkge1xuICAgICAgICBzdXBlcigpXG5cbiAgICAgICAgdGhpcy5kb20gPSB0eXBlb2YgaWQgPT0gJ3N0cmluZycgPyBkb2MuZ2V0RWxlbWVudEJ5SWQoaWQpIDogaWRcbiAgICAgICAgdGhpcy5heCA9IDBcbiAgICAgICAgdGhpcy5heSA9IDBcblxuICAgICAgICB0aGlzLm14ID0gbXggfHwgLTYwXG4gICAgICAgIHRoaXMubXkgPSBteSB8fCAwXG5cbiAgICAgICAgYXBwZW5kRXZlbnQodGhpcy5kb20sICdkb3duJywgc2xpcERvd24uYmluZCh0aGlzKSlcbiAgICB9XG5cbiAgICAvLyDmuIXnkIZcbiAgICBzZXRTa2V3aW5nKHgsIHkpIHtcbiAgICAgICAgdGhpcy5heCA9IGdldE1heCh0aGlzLm14LCB4IHx8IDApXG4gICAgICAgIHRoaXMuYXkgPSBnZXRNYXgodGhpcy5teSwgeSB8fCAwKVxuICAgICAgICByZXR1cm4gW3RoaXMuYXgsIHRoaXMuYXldXG4gICAgfVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT3ms6jlhoxWdWXmjIfku6Q9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxubGV0IHRyYW5zZm9ybUtleXMgPSAnV2Via2l0VHJhbnNmb3JtLE1velRyYW5zZm9ybSxPVHJhbnNmb3JtLE1zVHJhbnNmb3JtLHRyYW5zZm9ybScuc3BsaXQoJywnKVxubGV0IHRyYW5zaXRpb25LZXlzID0gJ1dlYmtpdFRyYW5zaXRpb24sTW96VHJhbnNpdGlvbixPVHJhbnNpdGlvbixNc1RyYW5zZm9ybSx0cmFuc2l0aW9uJy5zcGxpdCgnLCcpXG5cblxuZnVuY3Rpb24gc2V0VHJhbnNpdGlvbihkb20sIHQpe1xuICAgIGxldCB0U3RyID0gdCA+IDAgPyAndHJhbnNmb3JtICcgKyB0ICsgJ21zIGVhc2Utb3V0JzogJ25vbmUnXG4gICAgdHJhbnNpdGlvbktleXMuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICAvLyB0cmFuc2Zvcm0gLjM1cyBlYXNlLW91dFxuICAgICAgICBkb20uc3R5bGVba2V5XSA9IHRTdHJcbiAgICB9KVxufVxuXG5mdW5jdGlvbiBzZXRUcmFuc2xhdGUoZG9tLCB4LCB5LCBhbmltKXtcbiAgICB0cmFuc2Zvcm1LZXlzLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgZG9tLnN0eWxlW2tleV0gPSAndHJhbnNsYXRlM2QoJyArIHggKyAncHgsICcgKyB5ICsgJ3B4LCAwKSdcbiAgICB9KVxuICAgIGlmKGFuaW0pe1xuICAgICAgICBzZXRUcmFuc2l0aW9uKGRvbSwgYW5pbSlcbiAgICB9XG4gICAgLy9kb20uc3R5bGUuXG59XG5cbmZ1bmN0aW9uIGluc3RhbGwodnVlLCBuYW1lZCA9ICdzbGlwJyl7XG5cbiAgICBsZXQgY3VyclNsaXBcbiAgICBmdW5jdGlvbiBjbG9zZUN1cnIoKSB7XG4gICAgICAgIGlmKGN1cnJTbGlwKXtcbiAgICAgICAgICAgIGN1cnJTbGlwLnNldFRyYW5zbGF0ZSgpXG4gICAgICAgICAgICBjdXJyU2xpcCA9IG51bGxcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFwcGVuZEV2ZW50KGRvYy5kb2N1bWVudEVsZW1lbnQsICdkb3duJywgY2xvc2VDdXJyKVxuXG4gICAgLy8g5oyH5LukXG4gICAgdnVlLmRpcmVjdGl2ZShuYW1lZCwge1xuICAgICAgICBiaW5kOiBmdW5jdGlvbihlbCwgYmluZGluZywgdm5vZGUpe1xuICAgICAgICAgICAgbGV0IG9wdCA9IGJpbmRpbmcudmFsdWUgfHwge31cbiAgICAgICAgICAgIGxldCBteCA9IG9wdC5teCB8fCAtNjBcbiAgICAgICAgICAgIGxldCBteSA9IG9wdC5teSB8fCAwXG4gICAgICAgICAgICBsZXQgYXV0byA9IG9wdC5hdXRvID09PSBmYWxzZSA/IDAgOiAob3B0LmF1dG8gfHwgMTAwKVxuICAgICAgICAgICAgbGV0IHlTdGFydCA9IDAsIGlzU2Nyb2xsID0gMFxuICAgICAgICAgICAgbmV3IFNsaXAoZWwsIG14LCBteSlcbiAgICAgICAgICAgIC5vbignc3RhcnQnLCBmdW5jdGlvbihldmVudCl7XG4gICAgICAgICAgICAgICAgaWYoYXV0byl7XG4gICAgICAgICAgICAgICAgICAgIHNldFRyYW5zaXRpb24odGhpcy5kb20sIDApXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHlTdGFydCA9IGV2ZW50LmNsaWVudFlcbiAgICAgICAgICAgICAgICBpc1Njcm9sbCA9IDBcbiAgICAgICAgICAgICAgICBpZihjdXJyU2xpcCAmJiBjdXJyU2xpcCAhPSB0aGlzKXtcbiAgICAgICAgICAgICAgICAgICAgY2xvc2VDdXJyKClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcblxuICAgICAgICAgICAgICAgIG9wdC5zdGFydCAmJiBvcHQuc3RhcnQodGhpcywgZXZlbnQpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLm9uKCdlbmQnLCBmdW5jdGlvbih4LCB5LCBldmVudCl7XG4gICAgICAgICAgICAgICAgaWYoaXNTY3JvbGwgPiAwKXtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmKGF1dG8pe1xuICAgICAgICAgICAgICAgICAgICBsZXQgdHggPSBNYXRoLmFicyh4IC0gdGhpcy50eCkgLyBNYXRoLmFicyhteCkgPiAuMSA/IG14IDogMFxuICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnR4KXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR4ID0gdHggPT0gMCA/IG14IDogMFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHggPSB0eFxuICAgICAgICAgICAgICAgICAgICBsZXQgdHkgPSBNYXRoLmFicyh5IC0gdGhpcy50eSkgLyBNYXRoLmFicyhteSkgPiAuMSA/IG15IDogMFxuICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnR5ICE9IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHkgPSB0eSA9PSAwID8gbXkgOiAwXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy50eSA9IHR5XG4gICAgICAgICAgICAgICAgICAgIHNldFRyYW5zbGF0ZSh0aGlzLmRvbSwgdHgsIHR5LCBhdXRvKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFNrZXdpbmcodHgsIHR5KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjdXJyU2xpcCA9IHRoaXNcbiAgICAgICAgICAgICAgICBvcHQuZW5kICYmIG9wdC5lbmQodGhpcywgdHgsIHR5LCBldmVudClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAub24oJ21vdmUnLCBmdW5jdGlvbih4LCB5LCBldmVudCl7XG4gICAgICAgICAgICAgICAgaWYoaXNTY3JvbGwgPT0gMCl7XG4gICAgICAgICAgICAgICAgICAgIGlzU2Nyb2xsID0gTWF0aC5hYnMoZXZlbnQuY2xpZW50WSAtIHlTdGFydCkgPiA1ID8gMSA6IC0xXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmKGlzU2Nyb2xsID4gMCl7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgICAgIHNldFRyYW5zbGF0ZSh0aGlzLmRvbSwgeCwgeSlcbiAgICAgICAgICAgICAgICBvcHQubW92ZSAmJiBvcHQubW92ZSh0aGlzLCB4LCB5LCBldm5ldClcbiAgICAgICAgICAgIH0pLmFzc2lnbih7XG4gICAgICAgICAgICAgICAgdHg6IDAsXG4gICAgICAgICAgICAgICAgdHk6IDAsXG4gICAgICAgICAgICAgICAgc2V0VHJhbnNsYXRlICh4LCB5KSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBbdHgsIHR5XSA9IHRoaXMuc2V0U2tld2luZyh4IHx8IDAsIHkgfHwgMClcbiAgICAgICAgICAgICAgICAgICAgc2V0VHJhbnNsYXRlKHRoaXMuZG9tLCB0eCwgdHksIGF1dG8pXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHggPSB0eFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnR5ID0gdHlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfSlcbn1cblxuaWYod2luZG93LlZ1ZSl7XG4gICAgaW5zdGFsbCh3aW5kb3cuVnVlKVxufVxuXG5yZXR1cm4ge0V2ZW50RW1pdHRlciwgU2xpcCwgaW5zdGFsbH1cblxufSkpKSJdfQ==
