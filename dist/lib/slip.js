"use strict";function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _slicedToArray=function(){function t(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{!o&&a.return&&a.return()}finally{if(r)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):e()}(0,function(){function t(t){if(null==t.clientX){var e=t.targetTouches&&t.targetTouches[0]?t.targetTouches:t.changedTouches;if(e&&e[0])return t.clientX=e[0].clientX,t.clientY=e[0].clientY,[e[0].clientX,e[0].clientY]}return[t.clientX,t.clientY]}function e(t,e,n,o){t.addEventListener(p[e],n,!!o)}function n(t,e,n,o){t.removeEventListener(p[e],n,!!o)}function o(t,e){return 0==t?0:t<0?e<t?t:e>0?0:e:e>t?t:e<0?0:e}function r(n){if(!m){m=this,e(h,"move",s,!0),e(h,"up",a,!0);var o=t(n),r=_slicedToArray(o,2),i=r[0],u=r[1];this.bx=this.ax-i,this.by=this.ay-u,this.emit("start",n)}}function i(e){var n=t(e),r=_slicedToArray(n,2),i=r[0],s=r[1];return[o(m.mx,i+m.bx),o(m.my,s+m.by)]}function s(t){if(m){var e;window.getSelection?window.getSelection().removeAllRanges():h.selection.empty(),(e=m).emit.apply(e,["move"].concat(_toConsumableArray(i(t)),[t]))}}function a(t){if(m){n(h,"up",a,!0),n(h,"move",s,!0);var e=i(t),o=_slicedToArray(e,2),r=o[0],u=o[1];this.ax=r,this.ay=u,m.emit("end",r,u,t),m=null}}function u(t,e){var n=e>0?"transform "+e+"ms ease-out":"none";b.forEach(function(e){t.style[e]=n})}function c(t,e,n,o){v.forEach(function(o){t.style[o]="translate3d("+e+"px, "+n+"px, 0)"}),o&&u(t,o)}function f(t){function n(){r&&(r.setTranslate(),r=null)}var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"slip",r=void 0;e(h.documentElement,"down",n),t.directive(o,{bind:function(t,e,o){var i=e.value||{},s=i.mx||-60,a=i.my||0,f=!1===i.auto?0:i.auto||100,l=0,h=0;new d(t,s,a).on("start",function(t){f&&u(this.dom,0),l=t.clientY,h=0,r&&r!=this&&n(),t.stopPropagation(),i.start&&i.start(this,i,t)}).on("end",function(t,e,n){if(!(h>0)){if(f){var o=Math.abs(t-this.tx)/Math.abs(s)>.1?s:0;this.tx&&(o=0==o?s:0),this.tx=o;var u=Math.abs(e-this.ty)/Math.abs(a)>.1?a:0;0!=this.ty&&(u=0==u?a:0),this.ty=u,c(this.dom,o,u,f),this.setSkewing(o,u)}r=this,i.end&&i.end(this,i,n)}}).on("move",function(t,e,n){0==h&&(h=Math.abs(n.clientY-l)>5?1:-1),h>0||(n.preventDefault(),c(this.dom,t,e),i.move&&i.move(this,i,n))}).assign({tx:0,ty:0,setTranslate:function(t,e){var n=this.setSkewing(t||0,e||0),o=_slicedToArray(n,2),r=o[0],i=o[1];c(this.dom,r,i,f),this.tx=r,this.ty=i}})}})}var l=(Array.prototype.slice,function(){function t(){_classCallCheck(this,t),this._monitor_=Object.assign({},this._monitor_||{})}return _createClass(t,[{key:"on",value:function(t,e){var n=this._monitor_||(this._monitor_={});return n[t]||(n[t]=[]),n[t].push(e),this}},{key:"hasEvent",value:function(t){return(this._monitor_&&this._monitor_[t]||[]).length>0||!!this["on"+t]}},{key:"onec",value:function(t,e){function n(){e.apply(this,arguments),this.off(t,n)}return this.on(t,n),this}},{key:"off",value:function(t,e){var n=this._monitor_;if(n)if(e){var o=n[t];if(o){var r=o.indexOf(e);r>-1&&o.splice(r,1)}}else t?delete n[t]:delete this._monitor_;return this}},{key:"emit",value:function(t){for(var e=this._monitor_&&this._monitor_[t]||[],n=arguments.length,o=Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];if(e.length)for(var i=0;i<e.length;i+=1)e[i].apply(this,o);var s=this["on"+t];return s&&s.apply(this,o),this}},{key:"assign",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return"string"==typeof e[0]?this.assign(_defineProperty({},e[0],e[1])):(e.unshift(this),Object.assign.apply(Object,e)),this}}]),t}()),h=window.document,y="ontouchstart"in h,m=void 0,p={move:y?"touchmove":"mousemove",down:y?"touchstart":"mousedown",up:y?"touchend":"mouseup"},d=function(t){function n(t,o,i){_classCallCheck(this,n);var s=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return s.dom="string"==typeof t?h.getElementById(t):t,s.ax=0,s.ay=0,s.mx=o||-60,s.my=i||0,e(s.dom,"down",r.bind(s)),s}return _inherits(n,t),_createClass(n,[{key:"setSkewing",value:function(t,e){return this.ax=o(this.mx,t||0),this.ay=o(this.my,e||0),[this.ax,this.ay]}}]),n}(l),v="WebkitTransform,MozTransform,OTransform,MsTransform,transform".split(","),b="WebkitTransition,MozTransition,OTransition,MsTransform,transition".split(",");return window.Vue&&f(window.Vue),{EventEmitter:l,Slip:d,install:f}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9zbGlwLmpzIl0sIm5hbWVzIjpbImdsb2JhbCIsImZhY3RvcnkiLCJleHBvcnRzIiwiX3R5cGVvZiIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsInVuZGVmaW5lZCIsImlzVG91Y2giLCJldiIsIm1vdmVEYXRhIiwidG91Y2hlcyIsInRhcmdldFRvdWNoZXMiLCJjaGFuZ2VkVG91Y2hlcyIsImNsaWVudFgiLCJjbGllbnRZIiwiZG93biIsInR5cGUiLCJmbiIsImNhcCIsInVwIiwiZXZlbnRzIiwicmVtb3ZlRXZlbnQiLCJhcHBlbmRFdmVudCIsImRvbSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJtIiwiYyIsInNsaXBEb3duIiwidGhpcyIsImRvYyIsInNsaXBNb3ZlIiwic2xpcFVwIiwiX2dldEV2ZW50WFkiLCJfZ2V0RXZlbnRYWTIiLCJfc2xpY2VkVG9BcnJheSIsIngiLCJieSIsImF5IiwieSIsImVtaXQiLCJnZXRTbGlwRGF0YSIsIl9nZXRFdmVudFhZMyIsImdldEV2ZW50WFkiLCJfZ2V0RXZlbnRYWTQiLCJnZXRNYXgiLCJieCIsIm15IiwiZXZ0IiwiX21vdmVEYXRhIiwid2luZG93IiwiZ2V0U2VsZWN0aW9uIiwicmVtb3ZlQWxsUmFuZ2VzIiwic2VsZWN0aW9uIiwiZW1wdHkiLCJhcHBseSIsImNvbmNhdCIsIl90b0NvbnN1bWFibGVBcnJheSIsImF4IiwidCIsInRTdHIiLCJ0cmFuc2l0aW9uS2V5cyIsImZvckVhY2giLCJrZXkiLCJzdHlsZSIsInNldFRyYW5zbGF0ZSIsImFuaW0iLCJ0cmFuc2Zvcm1LZXlzIiwic2V0VHJhbnNpdGlvbiIsImluc3RhbGwiLCJ2dWUiLCJjdXJyU2xpcCIsIm5hbWVkIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiY2xvc2VDdXJyIiwiYmluZCIsImVsIiwiYmluZGluZyIsInZub2RlIiwib3B0IiwidmFsdWUiLCJteCIsImF1dG8iLCJ5U3RhcnQiLCJpc1Njcm9sbCIsIlNsaXAiLCJldmVudCIsInN0b3BQcm9wYWdhdGlvbiIsInN0YXJ0Iiwib24iLCJ0eCIsIk1hdGgiLCJhYnMiLCJ0eSIsImVuZCIsInByZXZlbnREZWZhdWx0IiwibW92ZSIsImFzc2lnbiIsIl9zZXRTa2V3aW5nIiwic2V0U2tld2luZyIsIl9zZXRTa2V3aW5nMiIsIkV2ZW50RW1pdHRlciIsIkFycmF5IiwicHJvdG90eXBlIiwic2xpY2UiLCJfY2xhc3NDYWxsQ2hlY2siLCJfbW9uaXRvcl8iLCJPYmplY3QiLCJfY3JlYXRlQ2xhc3MiLCJtb25pdG9yIiwicHVzaCIsImZ1biIsImZ1bngiLCJvZmYiLCJlcyIsImluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsImFnIiwiX2xlbiIsIl9rZXkiLCJpIiwib25GdW4iLCJfbGVuMiIsImFyZ3MiLCJfa2V5MiIsInVuc2hpZnQiLCJkb2N1bWVudCIsIl9FdmVudEVtaXR0ZXIiLCJpZCIsIl90aGlzIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJfX3Byb3RvX18iLCJnZXRQcm90b3R5cGVPZiIsImNhbGwiLCJnZXRFbGVtZW50QnlJZCIsIl9pbmhlcml0cyIsInNwbGl0Il0sIm1hcHBpbmdzIjoiaXhEQUFDLFNBQVVBLEVBQVFDLEdBQ0MsWUFBbkIsbUJBQU9DLFNBQVAsWUFBQUMsUUFBT0QsV0FBMEMsbUJBQVhFLFFBQXlCQSxPQUFPRixRQUFVRCxJQUM5RCxrQkFBWEksU0FBeUJBLE9BQU9DLElBQU1ELE9BQU9KLEdBQVdBLEtBRi9ETSxFQUdRLFdBOEdULFFBQUlDLEdBQVVDLEdBRWQsR0FBSUMsTUFBQUEsRUFBQUEsUUFBSixDQUtRLEdBQUlDLEdBQVVGLEVBQUdHLGVBQWlCSCxFQUFHRyxjQUFjLEdBQUtILEVBQUdHLGNBQWdCSCxFQUFHSSxjQUh0RixJQUFBRixHQUFBQSxFQUF1QixHQUlmLE1BRkFGLEdBQUdLLFFBQUhILEVBQW9CLEdBQUFHLFFBQ3BCTCxFQUFBTSxRQUFJSixFQUFhQyxHQUFBQSxTQUNiRCxFQUFXQSxHQUFBQSxRQUFZQSxFQUFBLEdBQUFJLFNBR3ZCLE9B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WUFJR1EsS0FBTVIsRUFBUyxhQUFjLFlBRmpDWSxHQUFJQyxFQUFTLFdBQUEsV0F1RExDLEVBdExhLFNBQUEyRyxHQW9MTCxRQUFBM0MsR0FBQTRDLEVBQUFoRCxFQUFBbkMsR0FBQTJELGdCQUFBN0UsS0FBQXlELEVBQUEsSUFBQTZDLEdBQUFDLDJCQUFBdkcsTUFBQXlELEVBQUErQyxXQUFBekIsT0FBQTBCLGVBQUFoRCxJQUFBaUQsS0FBQTFHLE1BQUEsT0FBQXNHLEdBQUEzRyxJQUFBLGdCQUFBMEcsR0FBQXBHLEVBQUEwRyxlQUFBTixHQUFBQSxFQWlCUkMsRUFBS3pFLEdBQUssRUFiVnlFLEVBQUE3RixHQUFLb0IsRUFFTGhELEVBQUFBLEdBQUFBLElBQUEsR0FDQUEsRUFBQUEsR0FBQUEsR0FBVyxFQUVsQmEsRUFBQTRHLEVBQUEzRyxJQUFBLE9BQUFJLEVBQUFnRCxLQUFBdUQsSUFUZUEsRUFwTEssTUFBQU0sV0FBQW5ELEVBQUEyQyxHQUFBcEIsYUFBQXZCLElBQUF2QixJQUFBLGFBQUFrQixNQUFBLFNBK01ON0MsRUFBR0csR0FHVixNQWpCSlYsTUFBQTZCLEdBQUFiLEVBQUFoQixLQUFxQmtCLEdBQUlYLEdBQUEsR0FBQVAsS0FBQVMsR0FBQU8sRUFBQWhCLEtBQUFrQixHQUFBUixHQUFBLElBaUJiVixLQUFLNkIsR0FBSTdCLEtBQUtTLFFBbE5UZ0QsR0FzTGJoRSxHQWtDSjZDLEVBQWdCLGdFQUFnRXVFLE1BQU0sS0FoQmxGN0UsRUFBQSxvRUFBQTZFLE1BQUEsSUF5R1E1QyxPQUpBN0IsUUFBQUEsS0FDQWUsRUFBQUEsT0FBQUEsTUFHQWMsYUFBQUEsRUFBQUEsS0FBQUEsRUFGTXpCLFFBQUFBIiwiZmlsZSI6ImxpYi9zbGlwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcblx0dHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOlxuXHR0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOiBmYWN0b3J5KCk7XG59KHRoaXMsIChmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JztcblxuXG5jb25zdCBzbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTtcbi8vIOiHquWumuS5ieS6i+S7tiDnsbvkvLwgbm9kZWpz5Lit55qEIEV2ZW50RW1pdHRlclxuY2xhc3MgRXZlbnRFbWl0dGVyIHtcbiAgICBjb25zdHJ1Y3Rvcigpe1xuICAgICAgICAvLyDlhYvpmobkuIDku70g5LqL5Lu2XG4gICAgICAgIHRoaXMuX21vbml0b3JfID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5fbW9uaXRvcl8gfHwge30pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiDnu5Hlrprkuovku7ZcbiAgICAgKiBAcGFyYW0gdHlwZSDkuovku7blkI3np7BcbiAgICAgKiBAcGFyYW0gZnVuIOS6i+S7tuaWueazlVxuICAgICAqIEByZXR1cm5zIHtFdmVudEVtaXR0ZXJ9XG4gICAgICovXG4gICAgb24odHlwZSwgZnVuKSB7XG4gICAgICAgIGxldCBtb25pdG9yID0gdGhpcy5fbW9uaXRvcl8gfHwgKHRoaXMuX21vbml0b3JfID0ge30pO1xuICAgICAgICBtb25pdG9yW3R5cGVdIHx8IChtb25pdG9yW3R5cGVdID0gW10pO1xuICAgICAgICBtb25pdG9yW3R5cGVdLnB1c2goZnVuKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5Yik5pat5piv5ZCm6L+Y5pyJ54m55a6a5LqL5Lu2XG4gICAgICogQHBhcmFtIHR5cGVcbiAgICAgKiBAcmV0dXJucyB7Kn1cbiAgICAgKi9cbiAgICBoYXNFdmVudCh0eXBlKSB7XG4gICAgICAgIGxldCBtb25pdG9yID0gdGhpcy5fbW9uaXRvcl8gJiYgdGhpcy5fbW9uaXRvcl9bdHlwZV0gfHwgW107XG4gICAgICAgIHJldHVybiBtb25pdG9yLmxlbmd0aCA+IDAgfHwgISF0aGlzWydvbicgKyB0eXBlXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDlj6rmnInmiafooYzkuIDmrKHnmoTkuovku7ZcbiAgICAgKiBAcGFyYW0gdHlwZSDkuovku7blkI3np7BcbiAgICAgKiBAcGFyYW0gZnVuIOS6i+S7tuaWueazlVxuICAgICAqIEByZXR1cm5zIHtFdmVudEVtaXR0ZXJ9XG4gICAgICovXG4gICAgb25lYyh0eXBlLCBmdW4pIHtcbiAgICAgICAgZnVuY3Rpb24gZnVueCgpIHtcbiAgICAgICAgICAgIGZ1bi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgdGhpcy5vZmYodHlwZSwgZnVueCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vbih0eXBlLCBmdW54KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog56e76Zmk5LqL5Lu2XG4gICAgICogQHBhcmFtIHR5cGUg5LqL5Lu25ZCN56ewXG4gICAgICogQHBhcmFtIGZ1biDkuovku7bmlrnms5VcbiAgICAgKiBAcmV0dXJucyB7RXZlbnRFbWl0dGVyfVxuICAgICAqL1xuICAgIG9mZih0eXBlLCBmdW4pIHtcbiAgICAgICAgbGV0IG1vbml0b3IgPSB0aGlzLl9tb25pdG9yXztcbiAgICAgICAgaWYgKG1vbml0b3IpIHtcbiAgICAgICAgICAgIGlmIChmdW4pIHtcbiAgICAgICAgICAgICAgICBsZXQgZXMgPSBtb25pdG9yW3R5cGVdO1xuICAgICAgICAgICAgICAgIGlmIChlcykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSBlcy5pbmRleE9mKGZ1bik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIG1vbml0b3JbdHlwZV07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9tb25pdG9yXztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDop6blj5Hkuovku7ZcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSDkuovku7blkI3np7BcbiAgICAgKiBAcGFyYW0geyp9IGFnIOS8oOmAkueahOWPguaVsFxuICAgICAqL1xuICAgIGVtaXQodHlwZSwgLi4uYWcpIHtcbiAgICAgICAgbGV0IGVzID0gdGhpcy5fbW9uaXRvcl8gJiYgdGhpcy5fbW9uaXRvcl9bdHlwZV0gfHwgW107XG4gICAgICAgIGlmIChlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICBlc1tpXS5hcHBseSh0aGlzLCBhZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG9uRnVuID0gdGhpc1snb24nICsgdHlwZV07XG4gICAgICAgIG9uRnVuICYmIG9uRnVuLmFwcGx5KHRoaXMsIGFnKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5omp5bGV5pys6LqrXG4gICAgICovXG4gICAgYXNzaWduKC4uLmFyZ3MpIHtcbiAgICAgICAgaWYodHlwZW9mIGFyZ3NbMF0gPT09ICdzdHJpbmcnKXtcbiAgICAgICAgICAgIHRoaXMuYXNzaWduKHtbYXJnc1swXV06YXJnc1sxXX0pXG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICAgICAgICAgIGFyZ3MudW5zaGlmdCh0aGlzKTtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24uYXBwbHkoT2JqZWN0LCBhcmdzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PeWfuuehgFNsaXDnsbs9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxubGV0IGRvYyA9IHdpbmRvdy5kb2N1bWVudFxuXG5sZXQgaXNUb3VjaCA9ICdvbnRvdWNoc3RhcnQnIGluIGRvY1xuXG5sZXQgbW92ZURhdGFcblxuZnVuY3Rpb24gZ2V0RXZlbnRYWShldil7XG4gICAgLy/np7vliqjmmK/lpJrngrnop6bmjqfvvIzpu5jorqTkvb/nlKjnrKzkuIDkuKrkvZzkuLpjbGllbnRY5ZKMY2xpZW50WVxuICAgIGlmIChldi5jbGllbnRYID09IG51bGwpIHtcbiAgICAgICAgbGV0IHRvdWNoZXMgPSBldi50YXJnZXRUb3VjaGVzICYmIGV2LnRhcmdldFRvdWNoZXNbMF0gPyBldi50YXJnZXRUb3VjaGVzIDogZXYuY2hhbmdlZFRvdWNoZXNcbiAgICAgICAgaWYgKHRvdWNoZXMgJiYgdG91Y2hlc1swXSkge1xuICAgICAgICAgICAgZXYuY2xpZW50WCA9IHRvdWNoZXNbMF0uY2xpZW50WFxuICAgICAgICAgICAgZXYuY2xpZW50WSA9IHRvdWNoZXNbMF0uY2xpZW50WVxuICAgICAgICAgICAgcmV0dXJuIFt0b3VjaGVzWzBdLmNsaWVudFgsIHRvdWNoZXNbMF0uY2xpZW50WV1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gW2V2LmNsaWVudFgsIGV2LmNsaWVudFldXG59XG5cbmxldCBldmVudHMgPSB7XG4gICAgbW92ZTogaXNUb3VjaD8gJ3RvdWNobW92ZSc6ICdtb3VzZW1vdmUnLFxuICAgIGRvd246IGlzVG91Y2g/ICd0b3VjaHN0YXJ0JzogJ21vdXNlZG93bicsXG4gICAgdXA6IGlzVG91Y2g/ICd0b3VjaGVuZCc6ICdtb3VzZXVwJ1xufVxuZnVuY3Rpb24gYXBwZW5kRXZlbnQoZG9tLCB0eXBlLCBmbiwgY2FwKXtcbiAgICBkb20uYWRkRXZlbnRMaXN0ZW5lcihldmVudHNbdHlwZV0sIGZuLCAhIWNhcClcbn1cbmZ1bmN0aW9uIHJlbW92ZUV2ZW50KGRvbSwgdHlwZSwgZm4sIGNhcCl7XG4gICAgZG9tLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnRzW3R5cGVdLCBmbiwgISFjYXApXG59XG5cbmZ1bmN0aW9uIGdldE1heChtLCBjKXtcbiAgICBpZihtID09IDApe1xuICAgICAgICByZXR1cm4gMFxuICAgIH1cbiAgICBpZihtIDwgMCl7XG4gICAgICAgIHJldHVybiBjIDwgbSA/IG0gOiAoYyA+IDAgPyAwIDogYylcbiAgICB9XG4gICAgcmV0dXJuIGMgPiBtID8gbSA6IChjIDwgMCA/IDAgOiBjKVxufVxuXG4vL+m8oOagh+enu+WKqOW8gOWni1xuZnVuY3Rpb24gc2xpcERvd24oZXYpe1xuICAgIGlmKG1vdmVEYXRhKXtcbiAgICAgICAgcmV0dXJuXG4gICAgfVxuICAgIG1vdmVEYXRhID0gdGhpc1xuICAgIGFwcGVuZEV2ZW50KGRvYywgJ21vdmUnLCBzbGlwTW92ZSwgdHJ1ZSlcbiAgICBhcHBlbmRFdmVudChkb2MsICd1cCcsIHNsaXBVcCwgdHJ1ZSlcbiAgICBsZXQgW3gsIHldID0gZ2V0RXZlbnRYWShldilcbiAgICB0aGlzLmJ4ID0gdGhpcy5heCAtIHhcbiAgICB0aGlzLmJ5ID0gdGhpcy5heSAtIHlcbiAgICB0aGlzLmVtaXQoJ3N0YXJ0JywgZXYpXG59XG5cbmZ1bmN0aW9uIGdldFNsaXBEYXRhKGV2KXtcbiAgICBsZXQgW3gsIHldID0gZ2V0RXZlbnRYWShldilcbiAgICByZXR1cm4gW2dldE1heChtb3ZlRGF0YS5teCwgeCArIG1vdmVEYXRhLmJ4KSwgZ2V0TWF4KG1vdmVEYXRhLm15LCB5ICsgbW92ZURhdGEuYnkpXVxuICAgIC8vbW92ZURhdGEuZW1pdCh0eXBlLCBteCwgbXksIGV2KVxuICAgIC8vcmV0dXJuIFtteCwgbXldXG59XG5cbi8v6byg5qCH56e75Yqo5LitXG5mdW5jdGlvbiBzbGlwTW92ZShldnQpe1xuICAgIGlmKG1vdmVEYXRhKXtcbiAgICAgICAgd2luZG93LmdldFNlbGVjdGlvbiA/IHdpbmRvdy5nZXRTZWxlY3Rpb24oKS5yZW1vdmVBbGxSYW5nZXMoKSA6IGRvYy5zZWxlY3Rpb24uZW1wdHkoKVxuICAgICAgICBtb3ZlRGF0YS5lbWl0KCdtb3ZlJywgLi4uZ2V0U2xpcERhdGEoZXZ0KSwgZXZ0KVxuICAgIH1cbn1cblxuLy/pvKDmoIfmiqzotbdcbmZ1bmN0aW9uIHNsaXBVcChldnQpe1xuICAgIGlmKG1vdmVEYXRhKXtcbiAgICAgICAgcmVtb3ZlRXZlbnQoZG9jLCAndXAnLCBzbGlwVXAsIHRydWUpXG4gICAgICAgIHJlbW92ZUV2ZW50KGRvYywgJ21vdmUnLCBzbGlwTW92ZSwgdHJ1ZSlcbiAgICAgICAgbGV0IFt4LCB5XSA9IGdldFNsaXBEYXRhKGV2dClcbiAgICAgICAgdGhpcy5heCA9IHhcbiAgICAgICAgdGhpcy5heSA9IHlcbiAgICAgICAgbW92ZURhdGEuZW1pdCgnZW5kJywgeCwgeSwgZXZ0KVxuICAgICAgICBtb3ZlRGF0YSA9IG51bGxcbiAgICB9XG59XG5cbmNsYXNzIFNsaXAgZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xuICAgIC8vIOWIneWni+WMllxuICAgIGNvbnN0cnVjdG9yIChpZCwgbXgsIG15KSB7XG4gICAgICAgIHN1cGVyKClcblxuICAgICAgICB0aGlzLmRvbSA9IHR5cGVvZiBpZCA9PSAnc3RyaW5nJyA/IGRvYy5nZXRFbGVtZW50QnlJZChpZCkgOiBpZFxuICAgICAgICB0aGlzLmF4ID0gMFxuICAgICAgICB0aGlzLmF5ID0gMFxuXG4gICAgICAgIHRoaXMubXggPSBteCB8fCAtNjBcbiAgICAgICAgdGhpcy5teSA9IG15IHx8IDBcblxuICAgICAgICBhcHBlbmRFdmVudCh0aGlzLmRvbSwgJ2Rvd24nLCBzbGlwRG93bi5iaW5kKHRoaXMpKVxuICAgIH1cblxuICAgIC8vIOa4heeQhlxuICAgIHNldFNrZXdpbmcoeCwgeSkge1xuICAgICAgICB0aGlzLmF4ID0gZ2V0TWF4KHRoaXMubXgsIHggfHwgMClcbiAgICAgICAgdGhpcy5heSA9IGdldE1heCh0aGlzLm15LCB5IHx8IDApXG4gICAgICAgIHJldHVybiBbdGhpcy5heCwgdGhpcy5heV1cbiAgICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PeazqOWGjFZ1ZeaMh+S7pD09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5sZXQgdHJhbnNmb3JtS2V5cyA9ICdXZWJraXRUcmFuc2Zvcm0sTW96VHJhbnNmb3JtLE9UcmFuc2Zvcm0sTXNUcmFuc2Zvcm0sdHJhbnNmb3JtJy5zcGxpdCgnLCcpXG5sZXQgdHJhbnNpdGlvbktleXMgPSAnV2Via2l0VHJhbnNpdGlvbixNb3pUcmFuc2l0aW9uLE9UcmFuc2l0aW9uLE1zVHJhbnNmb3JtLHRyYW5zaXRpb24nLnNwbGl0KCcsJylcblxuXG5mdW5jdGlvbiBzZXRUcmFuc2l0aW9uKGRvbSwgdCl7XG4gICAgbGV0IHRTdHIgPSB0ID4gMCA/ICd0cmFuc2Zvcm0gJyArIHQgKyAnbXMgZWFzZS1vdXQnOiAnbm9uZSdcbiAgICB0cmFuc2l0aW9uS2V5cy5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgIC8vIHRyYW5zZm9ybSAuMzVzIGVhc2Utb3V0XG4gICAgICAgIGRvbS5zdHlsZVtrZXldID0gdFN0clxuICAgIH0pXG59XG5cbmZ1bmN0aW9uIHNldFRyYW5zbGF0ZShkb20sIHgsIHksIGFuaW0pe1xuICAgIHRyYW5zZm9ybUtleXMuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICBkb20uc3R5bGVba2V5XSA9ICd0cmFuc2xhdGUzZCgnICsgeCArICdweCwgJyArIHkgKyAncHgsIDApJ1xuICAgIH0pXG4gICAgaWYoYW5pbSl7XG4gICAgICAgIHNldFRyYW5zaXRpb24oZG9tLCBhbmltKVxuICAgIH1cbiAgICAvL2RvbS5zdHlsZS5cbn1cblxuZnVuY3Rpb24gaW5zdGFsbCh2dWUsIG5hbWVkID0gJ3NsaXAnKXtcblxuICAgIGxldCBjdXJyU2xpcFxuICAgIGZ1bmN0aW9uIGNsb3NlQ3VycigpIHtcbiAgICAgICAgaWYoY3VyclNsaXApe1xuICAgICAgICAgICAgY3VyclNsaXAuc2V0VHJhbnNsYXRlKClcbiAgICAgICAgICAgIGN1cnJTbGlwID0gbnVsbFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXBwZW5kRXZlbnQoZG9jLmRvY3VtZW50RWxlbWVudCwgJ2Rvd24nLCBjbG9zZUN1cnIpXG5cbiAgICAvLyDmjIfku6RcbiAgICB2dWUuZGlyZWN0aXZlKG5hbWVkLCB7XG4gICAgICAgIGJpbmQ6IGZ1bmN0aW9uKGVsLCBiaW5kaW5nLCB2bm9kZSl7XG4gICAgICAgICAgICBsZXQgb3B0ID0gYmluZGluZy52YWx1ZSB8fCB7fVxuICAgICAgICAgICAgbGV0IG14ID0gb3B0Lm14IHx8IC02MFxuICAgICAgICAgICAgbGV0IG15ID0gb3B0Lm15IHx8IDBcbiAgICAgICAgICAgIGxldCBhdXRvID0gb3B0LmF1dG8gPT09IGZhbHNlID8gMCA6IChvcHQuYXV0byB8fCAxMDApXG4gICAgICAgICAgICBsZXQgeVN0YXJ0ID0gMCwgaXNTY3JvbGwgPSAwXG4gICAgICAgICAgICBuZXcgU2xpcChlbCwgbXgsIG15KVxuICAgICAgICAgICAgLm9uKCdzdGFydCcsIGZ1bmN0aW9uKGV2ZW50KXtcbiAgICAgICAgICAgICAgICBpZihhdXRvKXtcbiAgICAgICAgICAgICAgICAgICAgc2V0VHJhbnNpdGlvbih0aGlzLmRvbSwgMClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgeVN0YXJ0ID0gZXZlbnQuY2xpZW50WVxuICAgICAgICAgICAgICAgIGlzU2Nyb2xsID0gMFxuICAgICAgICAgICAgICAgIGlmKGN1cnJTbGlwICYmIGN1cnJTbGlwICE9IHRoaXMpe1xuICAgICAgICAgICAgICAgICAgICBjbG9zZUN1cnIoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuXG4gICAgICAgICAgICAgICAgb3B0LnN0YXJ0ICYmIG9wdC5zdGFydCh0aGlzLCBvcHQsIGV2ZW50KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5vbignZW5kJywgZnVuY3Rpb24oeCwgeSwgZXZlbnQpe1xuICAgICAgICAgICAgICAgIGlmKGlzU2Nyb2xsID4gMCl7XG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZihhdXRvKXtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHR4ID0gTWF0aC5hYnMoeCAtIHRoaXMudHgpIC8gTWF0aC5hYnMobXgpID4gLjEgPyBteCA6IDBcbiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy50eCl7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eCA9IHR4ID09IDAgPyBteCA6IDBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnR4ID0gdHhcbiAgICAgICAgICAgICAgICAgICAgbGV0IHR5ID0gTWF0aC5hYnMoeSAtIHRoaXMudHkpIC8gTWF0aC5hYnMobXkpID4gLjEgPyBteSA6IDBcbiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy50eSAhPSAwKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5ID0gdHkgPT0gMCA/IG15IDogMFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHkgPSB0eVxuICAgICAgICAgICAgICAgICAgICBzZXRUcmFuc2xhdGUodGhpcy5kb20sIHR4LCB0eSwgYXV0bylcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTa2V3aW5nKHR4LCB0eSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY3VyclNsaXAgPSB0aGlzXG4gICAgICAgICAgICAgICAgb3B0LmVuZCAmJiBvcHQuZW5kKHRoaXMsIG9wdCwgZXZlbnQpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLm9uKCdtb3ZlJywgZnVuY3Rpb24oeCwgeSwgZXZlbnQpe1xuICAgICAgICAgICAgICAgIGlmKGlzU2Nyb2xsID09IDApe1xuICAgICAgICAgICAgICAgICAgICBpc1Njcm9sbCA9IE1hdGguYWJzKGV2ZW50LmNsaWVudFkgLSB5U3RhcnQpID4gNSA/IDEgOiAtMVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZihpc1Njcm9sbCA+IDApe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgICAgICAgICBzZXRUcmFuc2xhdGUodGhpcy5kb20sIHgsIHkpXG4gICAgICAgICAgICAgICAgb3B0Lm1vdmUgJiYgb3B0Lm1vdmUodGhpcywgb3B0LCBldmVudClcbiAgICAgICAgICAgIH0pLmFzc2lnbih7XG4gICAgICAgICAgICAgICAgdHg6IDAsXG4gICAgICAgICAgICAgICAgdHk6IDAsXG4gICAgICAgICAgICAgICAgc2V0VHJhbnNsYXRlICh4LCB5KSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBbdHgsIHR5XSA9IHRoaXMuc2V0U2tld2luZyh4IHx8IDAsIHkgfHwgMClcbiAgICAgICAgICAgICAgICAgICAgc2V0VHJhbnNsYXRlKHRoaXMuZG9tLCB0eCwgdHksIGF1dG8pXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHggPSB0eFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnR5ID0gdHlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfSlcbn1cblxuaWYod2luZG93LlZ1ZSl7XG4gICAgaW5zdGFsbCh3aW5kb3cuVnVlKVxufVxuXG5yZXR1cm4ge0V2ZW50RW1pdHRlciwgU2xpcCwgaW5zdGFsbH1cblxufSkpKSJdfQ==
